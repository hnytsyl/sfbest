"use strict";$(function(){$.getJSON("http://datainfo.duapp.com/shopdata/getCar.php?callback=?",{userID:$.cookie("username")},function(t){console.log(t);for(var e="",n=0;n<t.length;n++){0==t[n].discount&&(t[n].discount=10);var a=Math.round(t[n].price*t[n].number*t[n].discount*.1);e+='\n            <div data-id="'+t[n].goodsID+'" class="cartPInfo">\n                        <div class="pItem pCheckbox">\n                            <input class="checkbox_c" type="checkbox" name="cart_list" checked>\n                        </div>\n                        <div class="pItem pGoods">\n                            <div class="cart_pimg">\n                                <a href="products.html?id='+t[n].goodsID+'" target="_blank">\n                                    <img src="'+t[n].goodsListImg+'" alt="">\n                                </a>\n                            </div>\n                            <div class="cart_pname">\n                                <div>\n                                    <a href="products.html?id='+t[n].goodsID+'" target="_blank">'+t[n].goodsName+'</a>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="pItem spree">\n                            ￥<span> '+t[n].price+'</span>\n                        </div>\n                        <div class="pItem pPromotion">'+t[n].discount+' 折</div>\n                        <div class="pItem pQuantity">\n                            <div class="cartAmout">\n                                <button class="down">-</button>\n                                <input class="num_shop" type="text" value="'+t[n].number+'">\n                                <button class="up">+</button>\n                            </div>\n                        </div>\n                        <div class="pItem pWeight"> '+t[n].className+' </div>\n                        <div class="pItem pSubtotal">￥<span class="p_price" id="total_price">'+a+'</span></div>\n                        <div class="pItem pInventory">现货</div>\n                        <div class="pItem pOperator">\n                            <a>收藏</a>&nbsp;&nbsp;<a class="delete">删除</a>\n                        </div>\n                    </div>\n            '}function c(){var t=0,e=0;$(".checkbox_c:checked").each(function(){t+=parseInt($(".num_shop").eq($(this).index(".checkbox_c")).val()),e+=parseFloat($(".p_price").eq($(this).index(".checkbox_c")).text())}),$("#allWeight").text(t),$("#allMoney").text(e)}$(".cartItem").html(e),$("#Zall").click(function(){$(".pCheckbox input").prop("checked",$(this).prop("checked")),c()}),$(".pCheckbox input").click(function(){$(".checkbox_c:checked").length==$(".checkbox_c").length?$("#Zall").prop("checked",!0):$("#Zall").prop("checked",!1),c()}),$(".delete").click(function(){$(this).parent().parent().remove();var t=$(this).parent().parent().attr("data-id");$.getJSON("http://datainfo.duapp.com/shopdata/updatecar.php?callback=?",{userID:$.cookie("username"),goodsID:t,number:0},function(t){})}),$(".up").click(function(){var t=$(".spree span").eq($(this).index(".up")).text();console.log(t);var e=$(this).prev().val();e++,$(this).prev().val(e),$(".pSubtotal span").eq($(this).index(".up")).text(parseFloat(t)*e),c()}),$(".down").click(function(){var t=$(".spree span").eq($(this).index(".down")).text();console.log(t);var e=$(this).next().val();--e<=0&&(e=0),$(this).next().val(e),$(".pSubtotal span").eq($(this).index(".down")).text(parseFloat(t)*e),c()}),$(".cartJsuan input:first-child").click(function(){location.href="../html/index.html"})})});